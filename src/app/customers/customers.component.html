<section class="customers">
  <header>
    <h2>Customers</h2>
    <p>Review each EV driver and the vehicles they have registered.</p>
  </header>

  <div class="status" *ngIf="isLoading">Loading customers…</div>
  <div class="status error" *ngIf="!isLoading && errorMessage">{{ errorMessage }}</div>

  <div class="customer-grid" *ngIf="!isLoading && !errorMessage">
    <article class="customer-card" *ngFor="let customer of customers">
      <h3>{{ customer.name }}</h3>
      <p class="email">{{ customer.email }}</p>

      <div *ngIf="customer.cars?.length; else noVehicles">
        <h4>Cars</h4>
        <ul>
          <li *ngFor="let car of customer.cars">
            <strong>{{ car.make }} {{ car.model }}</strong>
            <span class="meta"> • {{ car.type }} • {{ car.batteryKWh }} kWh • {{ car.plate }}</span>
          </li>
        </ul>
      </div>
      <ng-template #noVehicles>
        <p class="muted">No cars recorded for this customer.</p>
      </ng-template>

      <a class="charges-link" [routerLink]="['/customers', customer.id, 'charges']">View charge history</a>
    </article>
  </div>
</section>
